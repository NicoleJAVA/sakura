(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6476fb2"],{"2fbf":function(t,e,i){},"5faa":function(t,e,i){"use strict";i("2fbf")},7641:function(t,e,i){"use strict";i("7d8d")},"76db":function(t,e,i){"use strict";i.r(e);var c=i("7a23"),a=Object(c["R"])("data-v-59ddda25");Object(c["x"])("data-v-59ddda25");var s={class:"container container-custom-width"},n={class:"row mt-4 pb-5"},l={class:"col-md-12 col-lg-7"},o={class:"break-line-10 text-primary"},d={class:"row align-items-center"},r={class:"col"},b={class:"ratio-wrap",style:{"--w":"276","--h":"230"}},u={class:"col"},p={key:0,class:"fs-6 fw-300 text-center"},f=Object(c["i"])("div",{class:"d-inline-block label-2 py-1 me-2 mb-3 text-primary"}," 原價 ",-1),j={class:"d-inline-block label-4\n                    text-decoration-line-through text-deleted"},v={class:"fs-6 fw-300 text-subtitle text-center"},O=Object(c["i"])("div",{class:"d-inline-block label-2 py-1 me-2 mb-3\n                border border-primary text-primary"}," 特價 ",-1),g={class:"d-inline-block label-4"},h={class:"col"},m={class:"row"},x={class:"col flex-shrink-1 quantity-wrap\n                    d-flex flex-column align-items-center"},y={class:"cart-item-num text-center mb-3"},w={class:"mx-auto d-flex flex-nowrap"},C=Object(c["i"])("i",{class:"bi bi-dash"},null,-1),k=Object(c["i"])("i",{class:"bi bi-plus"},null,-1),$={class:"col d-flex justify-content-center"},_=Object(c["i"])("i",{class:"bi bi-trash"},null,-1),L={class:"col"},I={class:"fs-6 fw-300 text-subtitle text-center"},G=Object(c["i"])("div",{class:"d-inline-block label-3 py-1 me-2 mb-3\n                border border-primary text-primary"}," 小計 ",-1),q={class:"d-inline-block label-4"},D={class:"fs-6 fw-300 text-subtitle text-center"},R=Object(c["i"])("div",{class:"d-inline-block label-3 py-1 me-2 mb-2\n                bg-primary text-white"}," 折扣價 ",-1),T={class:"d-inline-block label-4"},A={class:"col-md-12 col-lg-5"},F={class:"bg-section h-100 ms-5 pt-6"},M={class:"row mb-4"},P=Object(c["i"])("div",{class:"col-1"},null,-1),S=Object(c["i"])("div",{class:"col-5 d-flex"},[Object(c["i"])("div",{class:"text-white bg-label label-4 py-2 px-2"},"總計")],-1),U={class:"col-5 text-secondary align-middle d-flex\n                align-items-center flex-row-reverse"},E={class:"row mb-4"},J=Object(c["i"])("div",{class:"col-1"},null,-1),K=Object(c["i"])("div",{class:"col-5 d-flex"},[Object(c["i"])("div",{class:"text-white bg-label label-4 py-2 px-2"},"折扣價")],-1),B={class:"col-5 text-secondary align-middle d-flex\n                align-items-center flex-row-reverse"},H={class:"row mb-5"},V=Object(c["i"])("div",{class:"col-1"},null,-1),z={class:"col-7 col-lg-5"},N={class:"col-3 col-lg-5 d-flex flex-row-reverse"},Q={class:"row mb-5 justify-content-center"};Object(c["v"])();var W=a((function(t,e,i,a,W,X){var Y=Object(c["D"])("Loading"),Z=Object(c["D"])("GappedDialog");return Object(c["u"])(),Object(c["e"])(c["a"],null,[Object(c["i"])(Y,{active:W.isLoading},null,8,["active"]),Object(c["i"])("div",s,[Object(c["i"])("div",n,[Object(c["i"])("ul",l,[(Object(c["u"])(!0),Object(c["e"])(c["a"],null,Object(c["B"])(W.cart.carts,(function(e){return Object(c["u"])(),Object(c["e"])("li",{class:"mb-4",key:e.id},[Object(c["i"])("div",null,[Object(c["i"])("div",o,Object(c["G"])(e.product.title),1)]),Object(c["i"])("div",d,[Object(c["i"])("div",r,[Object(c["i"])("div",b,[Object(c["i"])("img",{class:"ratio",alt:"image of the product",src:e.product.imageUrl},null,8,["src"])])]),Object(c["i"])("div",u,[e.product.price!==e.product.origin_price?(Object(c["u"])(),Object(c["e"])("div",p,[f,Object(c["i"])("div",j," $ "+Object(c["G"])(t.$filters.currency(e.product.origin_price)),1)])):Object(c["f"])("",!0),Object(c["i"])("div",v,[O,Object(c["i"])("div",g," $ "+Object(c["G"])(t.$filters.currency(e.product.price)),1)])]),Object(c["i"])("div",h,[Object(c["i"])("div",m,[Object(c["i"])("div",x,[Object(c["i"])("div",y,Object(c["G"])(e.qty),1),Object(c["i"])("span",w,[Object(c["i"])("button",{class:"left-rounded fs-6 fw-light line-height-1\n                        btn btn-outline-primary py-0 px-0 btn-link",disabled:e.qty<=1,onClick:function(t){return X.updateCart(e,e.qty-1)}},[C],8,["disabled","onClick"]),Object(c["i"])("button",{class:"right-rounded fs-6 fw-light line-height-1\n                      btn btn-outline-primary py-0 px-0 btn-link",onClick:function(t){return X.updateCart(e,e.qty+1)}},[k],8,["onClick"])])]),Object(c["i"])("div",$,[Object(c["i"])("button",{type:"button",class:"btn btn-link fs-5",disabled:W.status.loadingItem===e.id,onClick:function(t){return X.removeCartItem(e.id)}},[_],8,["disabled","onClick"])])])]),Object(c["i"])("div",L,[Object(c["i"])("div",I,[G,Object(c["i"])("div",q," $ "+Object(c["G"])(t.$filters.currency(e.total)),1)]),Object(c["i"])("div",D,[R,Object(c["i"])("div",T," $ "+Object(c["G"])(t.$filters.currency(e.final_total)),1)])])])])})),128))]),Object(c["i"])("div",A,[Object(c["i"])("div",F,[Object(c["i"])(Z,{class:"mx-auto mb-6"}),Object(c["i"])("div",M,[P,S,Object(c["i"])("div",U,Object(c["G"])(t.$filters.currency(W.cart.total)),1)]),Object(c["i"])("div",E,[J,K,Object(c["i"])("div",B,Object(c["G"])(t.$filters.currency(W.cart.final_total)),1)]),Object(c["i"])("div",H,[V,Object(c["i"])("div",z,[Object(c["P"])(Object(c["i"])("input",{type:"text",class:"border border-primary rounded-6 w-100 py-2 px-2 text-secondary","onUpdate:modelValue":e[1]||(e[1]=function(t){return W.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[c["K"],W.coupon_code]])]),Object(c["i"])("div",N,[Object(c["i"])("button",{class:"btn btn-secondary text-white w-100",type:"button",onClick:e[2]||(e[2]=function(){return X.addCouponCode&&X.addCouponCode.apply(X,arguments)})}," 套用優惠碼 ")])]),Object(c["i"])("div",Q,[Object(c["i"])("button",{class:"btn btn-secondary text-white circle-2 bounce-anim\n            rounded-circle d-flex align-items-center justify-content-center",onClick:e[3]||(e[3]=function(){return X.goToForm&&X.goToForm.apply(X,arguments)})}," 結帳 ")])])])])])],64)})),X=Object(c["R"])("data-v-506bf9b2");Object(c["x"])("data-v-506bf9b2");var Y={class:"gapped-dialog"},Z=Object(c["g"])('<div class="dialog-left-part" data-v-506bf9b2></div><div class="dialog-center-part" data-v-506bf9b2></div><div class="dialog-right-part" data-v-506bf9b2></div><div class="dialog-rotated-line" data-v-506bf9b2></div><div class="dialog-text text-secondary" data-v-506bf9b2>CHECKOUT</div>',5);Object(c["v"])();var tt=X((function(t,e,i,a,s,n){return Object(c["u"])(),Object(c["e"])("div",Y,[Z])})),et={name:"GappedDialog",data:function(){return{}}};i("7641");et.render=tt,et.__scopeId="data-v-506bf9b2";var it=et,ct={data:function(){return{products:[],product:{},isLoading:!1,status:{loadingItem:""},cart:{},coupon_code:""}},inject:["pushMessage","isApiSuccess"],components:{GappedDialog:it},methods:{updateCart:function(t,e){var i=this,c=this.$api+"/cart/".concat(t.id);this.isLoading=!0,this.status.loadingItem=t.id;var a={product_id:t.product_id,qty:e};this.$http.put(c,{data:a}).then((function(t){i.isLoading=!1,i.status.loadingItem="",i.isApiSuccess(t,c)&&i.getCart()})).catch((function(t){console.error("Failed to update cart. ",t)}))},addToCart:function(t){var e=this;this.status.loadingItem=t;var i=this.$api+"/cart",c={product_id:t,qty:1};this.$http.post(i,{data:c}).then((function(t){e.pushMessage(t,"加入購物車"),e.status.loadingItem="",e.getCart()})).catch((function(t){console.error("Add to cart error: ",t)}))},addCouponCode:function(){var t=this,e=this.$api+"/coupon",i={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:i}).then((function(e){t.getCart(),t.pushMessage(e,"套用優惠券"),t.isLoading=!1}))},removeCartItem:function(t){var e=this,i=this.$api+"/cart/"+t;this.status.loadingItem=t,this.isLoading=!0,this.$http.delete(i).then((function(t){e.status.loadingItem="",e.isLoading=!1,e.getCart(),e.pushMessage(t,"刪除購物車品項")}))},getProducts:function(){var t=this,e=this.$api+"/products/all";this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,t.products=e.data.products}))},getCart:function(){var t=this,e=this.$api+"/cart";this.isLoading=!0,this.$http.get(e).then((function(i){t.isLoading=!1,t.isApiSuccess(i,e)&&(t.cart=i.data.data,console.log("測試: cart",t.cart))})).catch((function(t){console.error("ERROR! Cannot get cart data: ",t)}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},goToForm:function(){this.$router.push("/user/form")}},created:function(){this.getProducts(),this.getCart()}};i("5faa");ct.render=W,ct.__scopeId="data-v-59ddda25";e["default"]=ct},"7d8d":function(t,e,i){}}]);
//# sourceMappingURL=chunk-c6476fb2.6d155097.js.map