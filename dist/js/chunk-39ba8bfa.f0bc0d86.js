(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39ba8bfa"],{"0fa5":function(t,e,c){"use strict";c.r(e);c("b0c0");var i=c("7a23"),s={class:"container-fluid"},a={class:"container container-custom-width"},n={class:"row mt-4"},o={class:"col-12 col-xl-aside"},r=Object(i["h"])(" 商品類別 "),u={class:"row col-12 col-xl-main"},d={class:"img-wrap ratio-wrap mb-3",style:{"--w":"276","--h":"230"}},l={target:"_blank",href:"#"},h={class:"lh-md pt-2 fw-600 break-line-2 fs-sm text-secondary text-center\n               card-product-name d-flex align-items-center justify-content-center"},p={class:"mt-2 mb-3 d-flex align-items-center justify-content-center fw-500"},b=Object(i["i"])("span",{class:"text-primary fw-300"},"NTD",-1),g={key:0,class:"text-decoration-line-through text-deleted fs-7 fw-light"},f={class:"d-flex align-items-center justify-content-center icons"},j=Object(i["i"])("i",{class:"bi bi-cart text-white fs-normal"},null,-1),O=Object(i["i"])("button",{type:"button",class:"btn btn-icon py-0 px-1"},[Object(i["i"])("i",{class:"bi bi-heart text-white fs-normal"})],-1),m=Object(i["i"])("button",{type:"button",class:"btn btn-icon py-0 px-1"},[Object(i["i"])("i",{class:"bi bi-share text-white fs-normal"})],-1);function y(t,e,c,y,v,w){var $=Object(i["D"])("Loading");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])($,{active:v.isLoading},null,8,["active"]),Object(i["i"])("div",s,[Object(i["i"])("div",a,[Object(i["i"])("div",n,[Object(i["i"])("div",o,[Object(i["i"])("ul",null,[Object(i["i"])("li",null,[Object(i["i"])("a",{href:"#",onClick:e[1]||(e[1]=Object(i["Q"])((function(t){return w.showAllProducts()}),["prevent"]))},"所有商品")])]),Object(i["i"])("ul",null,[r,(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(v.products,(function(t,e){return Object(i["u"])(),Object(i["e"])("li",{key:e},[Object(i["i"])("a",{href:"#",onClick:Object(i["Q"])((function(t){return w.showProducts(e)}),["prevent"])},Object(i["G"])(t.name),9,["onClick"])])})),128))])]),Object(i["i"])("ul",u,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(v.currProducts,(function(e){return Object(i["u"])(),Object(i["e"])("li",{key:e.id,class:"col-12 col-sm-6 col-md-4 mb-5 product-card mx-0"},[Object(i["i"])("div",d,[Object(i["i"])("a",l,[Object(i["i"])("img",{class:"opacity-anim ratio",alt:"image of the product",src:e.imageUrl},null,8,["src"])])]),Object(i["i"])("div",null,[Object(i["i"])("h3",h,Object(i["G"])(e.title),1),Object(i["i"])("div",p,[Object(i["i"])("span",{class:["me-2 fs-sm",w.getPriceStyle(e)]},[b,Object(i["h"])(" $ "+Object(i["G"])(t.$filters.currency(e.price)),1)],2),e.price!==e.origin_price?(Object(i["u"])(),Object(i["e"])("span",g,"NTD $ "+Object(i["G"])(t.$filters.currency(e.origin_price)),1)):Object(i["f"])("",!0)]),Object(i["i"])("div",f,[Object(i["i"])("button",{type:"button",class:"btn btn-icon py-0 px-1",onClick:function(t){return w.addToCart(e.id)}},[j],8,["onClick"]),O,m])])])})),128))])])])])],64)}c("159b");var v={data:function(){return{currProducts:[],allProducts:[],products:{},product:{},isLoading:!1,status:{loadingItem:""},cart:{},coupon_code:"",form:{user:{name:"",emal:"",tel:"",address:""},message:""}}},inject:["pushMessage","isApiSuccess","categoryName","getFakeImage"],methods:{createOrder:function(){var t=this,e=this.$api+"/order",c=this.form;this.isLoading=!0,this.$http.post(e,{data:c}).then((function(c){t.isLoading=!1,t.pushMessage(c,"建立訂單"),t.isApiSuccess(c,e)&&t.$router.push("/user/checkout/"+c.data.orderId)}))},updateCart:function(t){var e=this,c=this.$api+"/cart/".concat(t.id);this.isLoading=!0,this.status.loadingItem=t.id;var i={product_id:t.product_id,qty:t.qty};this.$http.put(c,{data:i}).then((function(t){e.isLoading=!1,e.status.loadingItem="",e.isApiSuccess(t,c)&&e.getCart()})).catch((function(t){console.error("Failed to update cart. ",t)}))},addToCart:function(t){var e=this;this.status.loadingItem=t;var c=this.$api+"/cart",i={product_id:t,qty:1};this.$http.post(c,{data:i}).then((function(t){e.pushMessage(t,"加入購物車"),e.status.loadingItem="",e.getCart()})).catch((function(t){console.error("Add to cart error: ",t)}))},addCouponCode:function(){var t=this,e=this.$api+"/coupon",c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){t.getCart(),t.pushMessage(e,"套用優惠券"),t.isLoading=!1}))},removeCartItem:function(t){var e=this,c=this.$api+"/cart/"+t;this.status.loadingItem=t,this.isLoading=!0,this.$http.delete(c).then((function(t){e.status.loadingItem="",e.isLoading=!1,e.getCart(),e.pushMessage(t,"刪除購物車品項")}))},showProducts:function(t){this.currProducts=this.products[t].data},showAllProducts:function(){this.currProducts=this.allProducts},getProducts:function(){var t=this,e=this.$api+"/products/all";this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,console.log("response data ",e.data.products),t.allProducts=e.data.products,t.allProducts.forEach((function(e){if(!(e.category in t.products)){t.products[e.category]={},t.products[e.category].data=[];var c=t.categoryName[e.category];t.products[e.category].name=c}t.products[e.category].data.push(e)})),t.currProducts=t.allProducts}))},getCart:function(){var t=this,e=this.$api+"/cart";this.isLoading=!0,this.$http.get(e).then((function(c){t.isLoading=!1,t.isApiSuccess(c,e)&&(t.cart=c.data.data)})).catch((function(t){console.error("ERROR! Cannot get cart data: ",t)}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},getPriceStyle:function(t){return t.price===t.origin_price?"text-subtitle":"text-strong-color"}},created:function(){this.getProducts(),this.getCart()}};v.render=y;e["default"]=v},b0c0:function(t,e,c){var i=c("83ab"),s=c("9bf2").f,a=Function.prototype,n=a.toString,o=/^\s*function ([^ (]*)/,r="name";i&&!(r in a)&&s(a,r,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-39ba8bfa.f0bc0d86.js.map