{"version":3,"sources":["webpack:///./src/views/Shop.vue","webpack:///./src/views/Shop.vue?1d7e","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","style","target","href","active","isLoading","showAllProducts","products","category","key","showProducts","name","currProducts","item","id","alt","src","getFakeImage","title","getPriceStyle","$filters","currency","price","origin_price","data","allProducts","product","status","loadingItem","cart","coupon_code","form","user","emal","tel","address","message","inject","methods","createOrder","api","this","$api","order","$http","post","then","response","pushMessage","isApiSuccess","$router","push","orderId","updateCart","product_id","qty","put","getCart","catch","error","console","addToCart","err","addCouponCode","coupon","code","removeCartItem","delete","getProducts","get","forEach","categoryName","getProduct","created","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match"],"mappings":"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","file":"js/chunk-39ba8bfa.368923a1.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container-fluid\">\n    <div class=\"container container-custom-width\">\n      <div class=\"row mt-4\">\n        <div class=\"col-12 col-xl-aside\">\n          <ul>\n            <li><a href=\"#\" @click.prevent=\"showAllProducts()\">所有商品</a></li>\n          </ul>\n          <ul>\n            商品類別\n            <li v-for=\"(category, key) in products\" :key=\"key\">\n              <a href=\"#\" @click.prevent=\"showProducts(key)\">\n                {{ category.name }}\n              </a>\n            </li>\n          </ul>\n        </div>\n        <ul class=\"row col-12 col-xl-main\">\n          <li\n            v-for=\"item in currProducts\"\n            :key=\"item.id\"\n            class=\"col-12 col-sm-6 col-md-4 mb-5 product-card mx-0\"\n          >\n            <div class=\"img-wrap ratio-wrap mb-3\" style=\"--w: 276; --h: 230;\">\n              <a target=\"_blank\" href=\"#\"\n                ><img\n                  class=\"opacity-anim ratio\"\n                  alt=\"image of the product\"\n                  :src=\"getFakeImage()\"\n              /></a>\n            </div>\n            <div>\n              <h3\n                class=\"lh-md pt-2 fw-600 break-line-2 fs-sm text-secondary text-center\n               card-product-name d-flex align-items-center justify-content-center\"\n              >\n                {{ item.title }}\n              </h3>\n              <div\n                class=\"mt-2 mb-3 d-flex align-items-center justify-content-center fw-500\"\n              >\n                <span class=\"me-2 fs-sm\" :class=\"getPriceStyle(item)\"\n                  ><span class=\"text-primary fw-300\">NTD</span> $\n                  {{ $filters.currency(item.price) }}</span\n                >\n                <span\n                  v-if=\"item.price !== item.origin_price\"\n                  class=\"text-decoration-line-through text-deleted fs-7 fw-light\"\n                  >NTD $ {{ $filters.currency(item.origin_price) }}</span\n                >\n              </div>\n              <div\n                class=\"d-flex align-items-center justify-content-center icons\"\n              >\n                <button type=\"button\" class=\"btn btn-icon py-0 px-1\">\n                  <i class=\"bi bi-cart text-white fs-normal\"></i>\n                </button>\n                <button type=\"button\" class=\"btn btn-icon py-0 px-1\">\n                  <i class=\"bi bi-heart text-white fs-normal\"></i>\n                </button>\n                <button type=\"button\" class=\"btn btn-icon py-0 px-1\">\n                  <i class=\"bi bi-share text-white fs-normal\"></i>\n                </button>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      currProducts: [],\n      allProducts: [],\n      products: {},\n      product: {},\n      isLoading: false,\n      status: {\n        loadingItem: '',\n      },\n      cart: {},\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          emal: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  inject: ['pushMessage', 'isApiSuccess', 'categoryName', 'getFakeImage'],\n  methods: {\n    createOrder () {\n      const api = this.$api + '/order';\n      const order = this.form;\n      this.isLoading = true;\n      this.$http.post(api, { data: order }).then(response => {\n        this.isLoading = false;\n        this.pushMessage(response, '建立訂單');\n\n        if (!this.isApiSuccess(response, api)) return;\n\n        this.$router.push('/user/checkout/' + response.data.orderId);\n      });\n    },\n    updateCart (item) {\n      const api = this.$api + `/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n\n      this.$http\n        .put(api, { data: cart })\n        .then(response => {\n          this.isLoading = false;\n          this.status.loadingItem = '';\n\n          if (!this.isApiSuccess(response, api)) return;\n\n          this.getCart();\n        })\n        .catch(error => {\n          console.error('Failed to update cart. ', error);\n        });\n    },\n    addToCart (id) {\n      this.status.loadingItem = id;\n      const api = this.$api + '/cart';\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http\n        .post(api, { data: cart })\n        .then(response => {\n          this.pushMessage(response, '加入購物車');\n          this.status.loadingItem = '';\n          this.getCart();\n        })\n        .catch(err => {\n          console.error('Add to cart error: ', err);\n        });\n    },\n    addCouponCode () {\n      const api = this.$api + '/coupon';\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(api, { data: coupon }).then(response => {\n        this.getCart();\n        this.pushMessage(response, '套用優惠券');\n        this.isLoading = false;\n      });\n    },\n    removeCartItem (id) {\n      const api = this.$api + '/cart/' + id;\n      this.status.loadingItem = id;\n      this.isLoading = true;\n      this.$http.delete(api).then(response => {\n        this.status.loadingItem = '';\n        this.isLoading = false;\n        this.getCart();\n        this.pushMessage(response, '刪除購物車品項');\n      });\n    },\n    showProducts (category) {\n      this.currProducts = this.products[category].data;\n    },\n    showAllProducts () {\n      this.currProducts = this.allProducts;\n    },\n    getProducts () {\n      const api = this.$api + '/products/all';\n      this.isLoading = true;\n      this.$http.get(api).then(response => {\n        this.isLoading = false;\n        this.allProducts = response.data.products;\n        this.allProducts.forEach(item => {\n          if (!(item.category in this.products)) {\n            this.products[item.category] = {};\n            this.products[item.category].data = [];\n            const name = this.categoryName[item.category];\n            this.products[item.category].name = name;\n          }\n          this.products[item.category].data.push(item);\n        });\n        this.currProducts = this.allProducts;\n      });\n    },\n    getCart () {\n      const api = this.$api + '/cart';\n      this.isLoading = true;\n      this.$http\n        .get(api)\n        .then(response => {\n          this.isLoading = false;\n\n          if (!this.isApiSuccess(response, api)) return;\n\n          this.cart = response.data.data;\n        })\n        .catch(error => {\n          console.error('ERROR! Cannot get cart data: ', error);\n        });\n    },\n    getProduct (id) {\n      this.$router.push(`/user/product/${id}`);\n    },\n    getPriceStyle (item) {\n      return item.price === item.origin_price\n        ? 'text-subtitle'\n        : 'text-strong-color';\n    },\n  },\n  created () {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./Shop.vue?vue&type=template&id=84a344f8\"\nimport script from \"./Shop.vue?vue&type=script&lang=js\"\nexport * from \"./Shop.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}