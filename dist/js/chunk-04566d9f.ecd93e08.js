(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04566d9f"],{"2a58":function(t,e,c){"use strict";c("3cfe")},"3cfe":function(t,e,c){},7641:function(t,e,c){"use strict";c("7d8d")},"76db":function(t,e,c){"use strict";c.r(e);var i=c("7a23"),n=Object(i["R"])("data-v-4179bebc");Object(i["x"])("data-v-4179bebc");var l={class:"container container-custom-width"},a={class:"row mt-4"},s={class:"col-md-12 col-lg-7"},o={class:"break-line-10 text-primary"},r={class:"row align-items-center"},d={class:"col"},b={class:"ratio-wrap",style:{"--w":"276","--h":"230"}},u={class:"col"},j={key:0,class:"fs-6 fw-300 text-center"},O=Object(i["i"])("div",{class:"d-inline-block label-2 py-1 me-2 mb-3 text-primary"}," 原價 ",-1),p={class:"d-inline-block label-4\n                    text-decoration-line-through text-deleted"},f={class:"fs-6 fw-300 text-subtitle text-center"},v=Object(i["i"])("div",{class:"d-inline-block label-2 py-1 me-2 mb-3\n                border border-primary text-primary"}," 特價 ",-1),g={class:"d-inline-block label-4"},h={class:"col"},m={class:"row"},y={class:"col flex-shrink-1 quantity-wrap\n                    d-flex flex-column align-items-center"},x={class:"cart-item-num text-center mb-3"},k={class:"mx-auto d-flex flex-nowrap"},C=Object(i["i"])("i",{class:"bi bi-dash"},null,-1),w=Object(i["i"])("i",{class:"bi bi-plus"},null,-1),$={class:"col d-flex justify-content-center"},_=Object(i["i"])("i",{class:"bi bi-trash"},null,-1),G={class:"col"},I={class:"fs-6 fw-300 text-subtitle text-center"},L=Object(i["i"])("div",{class:"d-inline-block label-3 py-1 me-2 mb-3\n                border border-primary text-primary"}," 小計 ",-1),q={class:"d-inline-block label-4"},T={class:"fs-6 fw-300 text-subtitle text-center"},P=Object(i["i"])("div",{class:"d-inline-block label-3 py-1 me-2 mb-2\n                bg-primary text-white"}," 折扣價 ",-1),U={class:"d-inline-block label-4"},F={class:"col-md-12 col-lg-5"},D={class:"bg-section h-100 ms-5 pt-6"},R={class:"row mb-4"},A=Object(i["i"])("div",{class:"col-1"},null,-1),K=Object(i["i"])("div",{class:"col-5 d-flex"},[Object(i["i"])("div",{class:"text-white bg-label label-4 py-2 px-2"},"總計")],-1),M={class:"col-5 text-secondary align-middle d-flex\n                align-items-center flex-row-reverse"},V={class:"row mb-4"},B=Object(i["i"])("div",{class:"col-1"},null,-1),S=Object(i["i"])("div",{class:"col-5 d-flex"},[Object(i["i"])("div",{class:"text-white bg-label label-4 py-2 px-2"},"折扣價")],-1),E={class:"col-5 text-secondary align-middle d-flex\n                align-items-center flex-row-reverse"},J={class:"row mb-5"},z=Object(i["i"])("div",{class:"col-1"},null,-1),H={class:"col-7 col-lg-5"},N={class:"col-3 col-lg-5 d-flex flex-row-reverse"},Q={class:"row mb-5 justify-content-center"},W={class:"row mt-4"},X={class:"col-md-5"},Y={class:""},Z={class:"table align-middle"},tt=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th"),Object(i["i"])("th",null,"品名"),Object(i["i"])("th",{style:{width:"150px"}},"數量"),Object(i["i"])("th",null,"單價")])],-1),et=Object(i["i"])("i",{class:"bi bi-x"},null,-1),ct={key:0,class:"text-success"},it={class:"input-group input-group-sm"},nt={class:"input-group-text"},lt={class:"text-end"},at={key:0,class:"text-success"},st=Object(i["i"])("td",{colspan:"3",class:"text-end"},"總計",-1),ot={class:"text-end"},rt={key:0},dt=Object(i["i"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),bt={class:"text-end text-success"},ut={class:"input-group mb-3 input-group-sm"},jt={class:"input-group-append"},Ot={class:""},pt={class:""},ft={class:"row"},vt={class:"col-md-7"},gt={class:"table align-middle"},ht=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"圖片"),Object(i["i"])("th",null,"商品名稱"),Object(i["i"])("th",null,"價格"),Object(i["i"])("th")])],-1),mt={style:{width:"200px"}},yt={href:"#",class:"text-dark"},xt={key:0,class:"h5"},kt={key:1,class:"h6"},Ct={key:2,class:"h5"},wt={class:"btn-group btn-group-sm"},$t=Object(i["i"])("div",{class:"spinner-border spinner-border-sm text-danger",role:"status"},null,-1);Object(i["v"])();var _t=n((function(t,e,c,n,_t,Gt){var It=Object(i["D"])("Loading"),Lt=Object(i["D"])("GappedDialog");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(It,{active:_t.isLoading},null,8,["active"]),Object(i["i"])("div",l,[Object(i["i"])("div",a,[Object(i["i"])("ul",s,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(_t.cart.carts,(function(e){return Object(i["u"])(),Object(i["e"])("li",{class:"mb-4",key:e.id},[Object(i["i"])("div",null,[Object(i["i"])("div",o,Object(i["G"])(e.product.title),1)]),Object(i["i"])("div",r,[Object(i["i"])("div",d,[Object(i["i"])("div",b,[Object(i["i"])("img",{class:"ratio",alt:"image of the product",src:e.product.imageUrl},null,8,["src"])])]),Object(i["i"])("div",u,[e.product.price!==e.product.origin_price?(Object(i["u"])(),Object(i["e"])("div",j,[O,Object(i["i"])("div",p," $ "+Object(i["G"])(t.$filters.currency(e.product.origin_price)),1)])):Object(i["f"])("",!0),Object(i["i"])("div",f,[v,Object(i["i"])("div",g," $ "+Object(i["G"])(t.$filters.currency(e.product.price)),1)])]),Object(i["i"])("div",h,[Object(i["i"])("div",m,[Object(i["i"])("div",y,[Object(i["i"])("div",x,Object(i["G"])(e.qty),1),Object(i["i"])("span",k,[Object(i["i"])("button",{class:"left-rounded fs-6 fw-light line-height-1\n                        btn btn-outline-primary py-0 px-0 btn-link",disabled:e.qty<=1,onClick:function(t){return Gt.updateCart(e,e.qty-1)}},[C],8,["disabled","onClick"]),Object(i["i"])("button",{class:"right-rounded fs-6 fw-light line-height-1\n                      btn btn-outline-primary py-0 px-0 btn-link",onClick:function(t){return Gt.updateCart(e,e.qty+1)}},[w],8,["onClick"])])]),Object(i["i"])("div",$,[Object(i["i"])("button",{type:"button",class:"btn btn-link fs-5",disabled:_t.status.loadingItem===e.id,onClick:function(t){return Gt.removeCartItem(e.id)}},[_],8,["disabled","onClick"])])])]),Object(i["i"])("div",G,[Object(i["i"])("div",I,[L,Object(i["i"])("div",q," $ "+Object(i["G"])(t.$filters.currency(e.total)),1)]),Object(i["i"])("div",T,[P,Object(i["i"])("div",U," $ "+Object(i["G"])(t.$filters.currency(e.final_total)),1)])])])])})),128))]),Object(i["i"])("div",F,[Object(i["i"])("div",D,[Object(i["i"])(Lt,{class:"mx-auto mb-6"}),Object(i["i"])("div",R,[A,K,Object(i["i"])("div",M,Object(i["G"])(t.$filters.currency(_t.cart.total)),1)]),Object(i["i"])("div",V,[B,S,Object(i["i"])("div",E,Object(i["G"])(t.$filters.currency(_t.cart.final_total)),1)]),Object(i["i"])("div",J,[z,Object(i["i"])("div",H,[Object(i["P"])(Object(i["i"])("input",{type:"text",class:"border border-primary rounded-6 w-100 py-2 px-2 text-secondary","onUpdate:modelValue":e[1]||(e[1]=function(t){return _t.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[i["K"],_t.coupon_code]])]),Object(i["i"])("div",N,[Object(i["i"])("button",{class:"btn btn-secondary text-white w-100",type:"button",onClick:e[2]||(e[2]=function(){return Gt.addCouponCode&&Gt.addCouponCode.apply(Gt,arguments)})}," 套用優惠碼 ")])]),Object(i["i"])("div",Q,[Object(i["i"])("button",{class:"btn btn-secondary text-white circle-2 bounce-anim\n            rounded-circle d-flex align-items-center justify-content-center",onClick:e[3]||(e[3]=function(){return Gt.goToForm&&Gt.goToForm.apply(Gt,arguments)})}," 結帳 ")])])])]),Object(i["i"])("div",W,[Object(i["i"])("div",X,[Object(i["i"])("div",Y,[Object(i["i"])("table",Z,[tt,Object(i["i"])("tbody",null,[_t.cart.carts?(Object(i["u"])(!0),Object(i["e"])(i["a"],{key:0},Object(i["B"])(_t.cart.carts,(function(e){return Object(i["u"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("td",null,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:_t.status.loadingItem===e.id,onClick:function(t){return Gt.removeCartItem(e.id)}},[et],8,["disabled","onClick"])]),Object(i["i"])("td",null,[Object(i["h"])(Object(i["G"])(e.product.title)+" ",1),e.coupon?(Object(i["u"])(),Object(i["e"])("div",ct," 已套用優惠券 ")):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("div",it,[Object(i["P"])(Object(i["i"])("input",{type:"number",class:"form-control",disabled:_t.status.loadingItem===e.id,onChange:function(t){return Gt.updateCart(e,e.qty)},min:"1","onUpdate:modelValue":function(t){return e.qty=t}},null,40,["disabled","onChange","onUpdate:modelValue"]),[[i["K"],e.qty,void 0,{number:!0}]]),Object(i["i"])("div",nt," / "+Object(i["G"])(e.product.unit),1)])]),Object(i["i"])("td",lt,[_t.cart.final_total!==_t.cart.total?(Object(i["u"])(),Object(i["e"])("small",at,"折扣價：")):Object(i["f"])("",!0),Object(i["h"])(" "+Object(i["G"])(t.$filters.currency(e.final_total)),1)])])})),128)):Object(i["f"])("",!0)]),Object(i["i"])("tfoot",null,[Object(i["i"])("tr",null,[st,Object(i["i"])("td",ot,Object(i["G"])(t.$filters.currency(_t.cart.total)),1)]),_t.cart.final_total!==_t.cart.total?(Object(i["u"])(),Object(i["e"])("tr",rt,[dt,Object(i["i"])("td",bt,Object(i["G"])(t.$filters.currency(_t.cart.final_total)),1)])):Object(i["f"])("",!0)])]),Object(i["i"])("div",ut,[Object(i["P"])(Object(i["i"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return _t.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[i["K"],_t.coupon_code]]),Object(i["i"])("div",jt,[Object(i["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[5]||(e[5]=function(){return Gt.addCouponCode&&Gt.addCouponCode.apply(Gt,arguments)})}," 套用優惠碼 ")])])])])]),Object(i["i"])("div",Ot,[Object(i["i"])("div",pt,[Object(i["i"])("div",{class:"btn btn-primary",onClick:e[6]||(e[6]=function(){return Gt.goToForm&&Gt.goToForm.apply(Gt,arguments)})},"前往結帳")])]),Object(i["i"])("div",ft,[Object(i["i"])("div",vt,[Object(i["i"])("table",gt,[ht,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(_t.products,(function(t){return Object(i["u"])(),Object(i["e"])("tr",{key:t.id},[Object(i["i"])("td",mt,[Object(i["i"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}]},null,4)]),Object(i["i"])("td",null,[Object(i["i"])("a",yt,Object(i["G"])(t.title),1)]),Object(i["i"])("td",null,[t.price?Object(i["f"])("",!0):(Object(i["u"])(),Object(i["e"])("div",xt,Object(i["G"])(t.origin_price)+" 元 ",1)),t.price?(Object(i["u"])(),Object(i["e"])("del",kt,"原價 "+Object(i["G"])(t.origin_price)+" 元",1)):Object(i["f"])("",!0),t.price?(Object(i["u"])(),Object(i["e"])("div",Ct," 現在只要 "+Object(i["G"])(t.price)+" 元 ",1)):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("div",wt,[Object(i["i"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return Gt.getProduct(t.id)}}," 查看更多 ",8,["onClick"]),Object(i["i"])("button",{type:"button",class:"btn btn-outline-danger position-relative",disabled:_t.status.loadingItem===t.id,onClick:function(e){return Gt.addToCart(t.id)}},[Object(i["i"])("div",{class:{invisible:_t.status.loadingItem===t.id}}," 加到購物車 ",2),Object(i["i"])("div",{class:["position-absolute w-100",{invisible:_t.status.loadingItem!==t.id}],style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[$t],2)],8,["disabled","onClick"])])])])})),128))])])])])])],64)})),Gt=Object(i["R"])("data-v-506bf9b2");Object(i["x"])("data-v-506bf9b2");var It={class:"gapped-dialog"},Lt=Object(i["g"])('<div class="dialog-left-part" data-v-506bf9b2></div><div class="dialog-center-part" data-v-506bf9b2></div><div class="dialog-right-part" data-v-506bf9b2></div><div class="dialog-rotated-line" data-v-506bf9b2></div><div class="dialog-text text-secondary" data-v-506bf9b2>CHECKOUT</div>',5);Object(i["v"])();var qt=Gt((function(t,e,c,n,l,a){return Object(i["u"])(),Object(i["e"])("div",It,[Lt])})),Tt={name:"GappedDialog",data:function(){return{}}};c("7641");Tt.render=qt,Tt.__scopeId="data-v-506bf9b2";var Pt=Tt,Ut={data:function(){return{products:[],product:{},isLoading:!1,status:{loadingItem:""},cart:{},coupon_code:""}},inject:["pushMessage","isApiSuccess"],components:{GappedDialog:Pt},methods:{updateCart:function(t,e){var c=this,i=this.$api+"/cart/".concat(t.id);this.isLoading=!0,this.status.loadingItem=t.id;var n={product_id:t.product_id,qty:e};this.$http.put(i,{data:n}).then((function(t){c.isLoading=!1,c.status.loadingItem="",c.isApiSuccess(t,i)&&c.getCart()})).catch((function(t){console.error("Failed to update cart. ",t)}))},addToCart:function(t){var e=this;this.status.loadingItem=t;var c=this.$api+"/cart",i={product_id:t,qty:1};this.$http.post(c,{data:i}).then((function(t){e.pushMessage(t,"加入購物車"),e.status.loadingItem="",e.getCart()})).catch((function(t){console.error("Add to cart error: ",t)}))},addCouponCode:function(){var t=this,e=this.$api+"/coupon",c={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:c}).then((function(e){t.getCart(),t.pushMessage(e,"套用優惠券"),t.isLoading=!1}))},removeCartItem:function(t){var e=this,c=this.$api+"/cart/"+t;this.status.loadingItem=t,this.isLoading=!0,this.$http.delete(c).then((function(t){e.status.loadingItem="",e.isLoading=!1,e.getCart(),e.pushMessage(t,"刪除購物車品項")}))},getProducts:function(){var t=this,e=this.$api+"/products/all";this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,t.products=e.data.products}))},getCart:function(){var t=this,e=this.$api+"/cart";this.isLoading=!0,this.$http.get(e).then((function(c){t.isLoading=!1,t.isApiSuccess(c,e)&&(t.cart=c.data.data,console.log("測試: cart",t.cart))})).catch((function(t){console.error("ERROR! Cannot get cart data: ",t)}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},goToForm:function(){this.$router.push("/user/form")}},created:function(){this.getProducts(),this.getCart()}};c("2a58");Ut.render=_t,Ut.__scopeId="data-v-4179bebc";e["default"]=Ut},"7d8d":function(t,e,c){}}]);
//# sourceMappingURL=chunk-04566d9f.ecd93e08.js.map